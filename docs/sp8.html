<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>scm_confocal.sp8 API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>scm_confocal.sp8</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="scm_confocal.sp8.sp8_series"><code class="flex name class">
<span>class <span class="ident">sp8_series</span></span>
<span>(</span><span>fmt='*.tif')</span>
</code></dt>
<dd>
<div class="desc"><p>Class of functions related to the sp8 microscope. The functions assume that
the data are exported as .tif files and placed in a own folder per series.
The current working directory is assumed to be that folder. For several
functions it is required that the xml metadata is present in a subfolder of
the working directory called 'MetaData', which is normally generated
automatically when exporting tif files as raw data.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>filenames</code></strong> :&ensp;<code>list</code> of <code>str</code></dt>
<dd>the filenames loaded associated with the series</dd>
<dt><strong><code>data</code></strong> :&ensp;<code>numpy array</code></dt>
<dd>the image data as loaded on the most recent call of sp8_series.load_data()</dd>
<dt><strong><code>metadata</code></strong> :&ensp;<code>xml.Elementtree root</code></dt>
<dd>the recording parameters associated with the image series</dd>
</dl>
<p>Initialize the class instance and assign the filenames of the data.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>fmt</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>format to use for finding the files. Uses the notation of the glob
library. The default is '*.tif'.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>None.</p></div>
<h3>Methods</h3>
<dl>
<dt id="scm_confocal.sp8.sp8_series.get_dimension_steps"><code class="name flex">
<span>def <span class="ident">get_dimension_steps</span></span>(<span>self, dim, load_stack_indices=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets a list of values for each step along the specified dimension, e.g.
a list of timestamps for the images or a list of height values for all
slices of a z-stack. For specification of dimensions, see
sp8_series.get_metadata_dimension()</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>dim</code></strong> :&ensp;<code>int</code> or <code>str</code></dt>
<dd>dimension to get steps for</dd>
<dt><strong><code>load_stack_indices</code></strong> :&ensp;<code>bool</code></dt>
<dd>if True, trims down the list of steps based on the dim_range used
when last loading data with load_stack</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>steps</code></strong> :&ensp;<code>list</code></dt>
<dd>list of values for every logical step in the data</dd>
<dt><strong><code>unit</code></strong> :&ensp;<code>str</code></dt>
<dd>physical unit of the step values</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.get_dimension_stepsize"><code class="name flex">
<span>def <span class="ident">get_dimension_stepsize</span></span>(<span>self, dim)</span>
</code></dt>
<dd>
<div class="desc"><p>Get the size of a single step along the specified dimension, e.g.
the pixelsize in x, y or z, or the time between timesteps. For
specification of dimensions, see sp8_series.get_metadata_dimension()</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>dim</code></strong> :&ensp;<code>int</code> or <code>str</code></dt>
<dd>dimension to get stepsize for</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>float</code></dt>
<dd>stepsize</dd>
<dt><strong><code>unit</code></strong> :&ensp;<code>int</code></dt>
<dd>physical unit of value</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.get_metadata_channels"><code class="name flex">
<span>def <span class="ident">get_metadata_channels</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the channel information from the metadata</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>channels</code></strong> :&ensp;<code>list</code> of <code>dict</code></dt>
<dd>list of dictionaries with length equal to number of channels where
each dict contains the metadata for one channel</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.get_metadata_dimension"><code class="name flex">
<span>def <span class="ident">get_metadata_dimension</span></span>(<span>self, dim)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the dimension data for a particular dimension. Dimension can be
given both as integer index (as specified by the Leica exported
MetaData which may not correspond to the indexing order of the data
stack) or as string containing the physical meaning, e.g. 'x-axis',
'time', 'excitation wavelength', etc.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>dim</code></strong> :&ensp;<code>int</code> or <code>str</code></dt>
<dd>dimension to get metadata of specified as integer or as name.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>dimension</code></strong> :&ensp;<code>dict</code></dt>
<dd>dictionary containing all metadata for that dimension</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.get_metadata_dimensions"><code class="name flex">
<span>def <span class="ident">get_metadata_dimensions</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Gets the dimension information from the metadata</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>dimensions</code></strong> :&ensp;<code>list</code> of <code>dict</code></dt>
<dd>list of dictionaries with length number of dimensions where
each dict contains the metadata for one data dimension</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.get_series_name"><code class="name flex">
<span>def <span class="ident">get_series_name</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns a string containing the filename (sans file extension) under
which the series is saved.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>name of the series</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.load_data"><code class="name flex">
<span>def <span class="ident">load_data</span></span>(<span>self, filenames=None, first=None, last=None, dtype=numpy.uint8)</span>
</code></dt>
<dd>
<div class="desc"><p>Loads the sequence of images into ndarray of form (files,y,x) and
converts the data to dtype</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>filenames</code></strong> :&ensp;<code>list</code> of <code>str</code>, optional</dt>
<dd>filenames of images to load. The default is what is passed from
<strong>init</strong>, which by default is all .tif images in the current
working directory.</dd>
<dt><strong><code>first</code></strong> :&ensp;<code>None</code> or <code>int</code>, optional</dt>
<dd>index of first image to load. The default is None.</dd>
<dt><strong><code>last</code></strong> :&ensp;<code>None</code> or <code>int</code>, optional</dt>
<dd>index of last image to load plus one. The default is None.</dd>
<dt><strong><code>dtype</code></strong> :&ensp;<code>(numpy) datatype</code>, optional</dt>
<dd>type to scale data to. The default is np.uint8.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>numpy.ndarray</code></dt>
<dd>3d numpy array with dimension order (filenames,y,x).</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.load_metadata"><code class="name flex">
<span>def <span class="ident">load_metadata</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Load the xml metadata exported with the files as xml_root object which
can be indexed with xml.etree.ElementTree</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>metadata</code></strong> :&ensp;<code>xml.etree.ElementTree object</code></dt>
<dd>Parsable xml tree object containing all the metadata</dd>
</dl></div>
</dd>
<dt id="scm_confocal.sp8.sp8_series.load_stack"><code class="name flex">
<span>def <span class="ident">load_stack</span></span>(<span>self, dim_range={}, dtype=numpy.uint8)</span>
</code></dt>
<dd>
<div class="desc"><p>Similar to sp8_series.load_data(), but converts the 3D array of images
automatically to a np.ndarray of the appropriate dimensionality.</p>
<p>Array dimensions are specified as follows:</p>
<pre><code>- If the number of detector channels is 2 or higher, the first
  array axis is the detector channel index (named 'channel').

- If the number of channels is 1, the first array axis is the first
  available dimension (instead of 'channel').

- Each subsequent array axis corresponds to a dimension as
  specified by and in reversed order of the metadata exported by
  the microscope software, excluding dimensions which are not
  available. The default order of dimensions in the metadata is:

     - (0 = 'channel')
     -  1 = 'x-axis'
     -  2 = 'y-axis'
     -  3 = 'z-axis'
     -  4 = 'time'
     -  5 = 'detection wavelength'
     -  6 = 'excitation wavelength'

- As an example, a 2 channel xyt measurement would result in a 4-d
  array with axis order ('channel','time','y-axis',
  'x-axis'), and a single channel xyz scan would be returned as
  ('z-axis','y-axis','x-axis')
</code></pre>
<p>For loading only part of the total dataset, the dim_range parameter can
be used to specify a range along any of the dimensions. This will be
more memory efficient than loading the entire stack and then discarding
part of the data. For slicing along the x or y axis this is not
possible and whole (xy) images must be loaded prior to discarding
data outside the specified x or y axis range.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>dim_range</code></strong> :&ensp;<code>dict</code>, optional</dt>
<dd>
<p>dict, with keys corresponding to channel/dimension labels as above
and slice objects as values. This allows you to only load part of
the data along any of the dimensions, such as only loading one
channel of multichannel data or a particular z-range. An example
use for only taking time steps up to 5 and z-slice 20 to 30 would
be:</p>
<pre><code>dim_range={'time':slice(None,5), 'z-axis':slice(20,30)}.
</code></pre>
<p>The default is {}.</p>
</dd>
<dt><strong><code>dtype</code></strong> :&ensp;<code>(numpy) datatype</code>, optional</dt>
<dd>type to scale data to. The default is np.uint8.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>numpy.ndarray</code></dt>
<dd>ndarray with the pixel values</dd>
<dt><strong><code>dimorder</code></strong> :&ensp;<code>tuple</code></dt>
<dd>tuple with lenght data.ndim specifying the ordering of dimensions
in the data with labels from the metadata of the microscope.</dd>
</dl></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="scm_confocal" href="index.html">scm_confocal</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="scm_confocal.sp8.sp8_series" href="#scm_confocal.sp8.sp8_series">sp8_series</a></code></h4>
<ul class="">
<li><code><a title="scm_confocal.sp8.sp8_series.get_dimension_steps" href="#scm_confocal.sp8.sp8_series.get_dimension_steps">get_dimension_steps</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.get_dimension_stepsize" href="#scm_confocal.sp8.sp8_series.get_dimension_stepsize">get_dimension_stepsize</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.get_metadata_channels" href="#scm_confocal.sp8.sp8_series.get_metadata_channels">get_metadata_channels</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.get_metadata_dimension" href="#scm_confocal.sp8.sp8_series.get_metadata_dimension">get_metadata_dimension</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.get_metadata_dimensions" href="#scm_confocal.sp8.sp8_series.get_metadata_dimensions">get_metadata_dimensions</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.get_series_name" href="#scm_confocal.sp8.sp8_series.get_series_name">get_series_name</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.load_data" href="#scm_confocal.sp8.sp8_series.load_data">load_data</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.load_metadata" href="#scm_confocal.sp8.sp8_series.load_metadata">load_metadata</a></code></li>
<li><code><a title="scm_confocal.sp8.sp8_series.load_stack" href="#scm_confocal.sp8.sp8_series.load_stack">load_stack</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>